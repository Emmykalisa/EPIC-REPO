{"version":3,"sources":["Message.js"],"names":["Message","messages","data","newMessage","id","uuid","v4","subject","message","parentMessageId","status","createdOn","push","find","mess","readMsgs","async","eachSeries","current","cb","err","findOne","index","indexOf","splice"],"mappings":";;;;;;;AAAA;;AACA;;AACA;;;;;;;;;;IAEMA,O;;;AACJ;;;;AAIA,qBAAc;AAAA;;AACZ,SAAKC,QAAL,GAAgB,CACd;AACE,YAAK,sCADP;AAEE,iBAAU,MAFZ;AAGE,iBAAU,aAHZ;AAIE,yBAAkB,KAJpB;AAKE,gBAAS,MALX;AAME,mBAAY;AANd,KADc,EASd;AACE,YAAK,sCADP;AAEE,iBAAU,OAFZ;AAGE,iBAAU,sBAHZ;AAIE,yBAAkB,WAJpB;AAKE,gBAAS,MALX;AAME,mBAAY;AANd,KATc,EAiBd;AACE,YAAK,sCADP;AAEE,iBAAU,UAFZ;AAGE,iBAAU,wCAHZ;AAIE,yBAAkB,WAJpB;AAKE,gBAAS,MALX;AAME,mBAAY;AANd,KAjBc,CAAhB;AA2BD;AACD;;;;;;;;2BAIOC,I,EAAM;AACX,UAAMC,UAAU,GAAG;AACjBC,QAAAA,EAAE,EAAEC,cAAKC,EAAL,EADa;AAEjBC,QAAAA,OAAO,EAAEL,IAAI,CAACK,OAAL,IAAgB,EAFR;AAGjBC,QAAAA,OAAO,EAAEN,IAAI,CAACM,OAAL,IAAgB,EAHR;AAIjBC,QAAAA,eAAe,EAAEP,IAAI,CAACO,eAAL,IAAwB,EAJxB;AAKjBC,QAAAA,MAAM,EAAER,IAAI,CAACQ,MAAL,IAAe,EALN;AAMjBC,QAAAA,SAAS,EAAE;AANM,OAAnB;AAQA,WAAKV,QAAL,CAAcW,IAAd,CAAmBT,UAAnB;AACA,aAAOA,UAAP;AACD;AACD;;;;;;;;4BAKQC,E,EAAI;AACV,aAAO,KAAKH,QAAL,CAAcY,IAAd,CAAmB,UAAAC,IAAI;AAAA,eAAIA,IAAI,CAACV,EAAL,KAAYA,EAAhB;AAAA,OAAvB,CAAP;AACD;;;iCACYM,M,EAAO;AAChB,UAAIK,QAAQ,GAAG,EAAf;;AACAC,qBAAMC,UAAN,CAAiB,KAAKhB,QAAtB,EAAgC,UAACiB,OAAD,EAAUC,EAAV,EAAe;AAC3C,YAAGD,OAAO,CAACR,MAAR,IAAgBA,MAAnB,EAA2BK,QAAQ,CAACH,IAAT,CAAcM,OAAd;AAC3BC,QAAAA,EAAE,CAAC,IAAD,CAAF;AACH,OAHD,EAGE,UAACC,GAAD,EAAO,CAER,CALD;;AAMA,aAAOL,QAAP;AACH;AACD;;;;;;8BAGU;AACR,aAAO,KAAKd,QAAZ;AACD;AAED;;;;;;;4BAIOG,E,EAAI;AACT,UAAMI,OAAO,GAAG,KAAKa,OAAL,CAAajB,EAAb,CAAhB;AACA,UAAMkB,KAAK,GAAG,KAAKrB,QAAL,CAAcsB,OAAd,CAAsBf,OAAtB,CAAd;AACA,WAAKP,QAAL,CAAcuB,MAAd,CAAqBF,KAArB,EAA4B,CAA5B;AACA,aAAO,EAAP;AACD;;;;;;eAEY,IAAItB,OAAJ,E","sourceRoot":"/home/giraict/Project/andela/EPICmail/server/models","sourcesContent":["import moment from 'moment';\nimport uuid from 'uuid';\nimport async from 'async';\n\nclass Message {\n  /**\n   * class constructor\n   * @param {object} data\n   */\n  constructor() {\n    this.messages = [\n      {\n        \"id\":\"d1081ada-49d5-4a0a-b97e-e10b85ba68eb\",\n        \"subject\":\"Test\",\n        \"message\":\"I will came\",\n        \"parentMessageId\":\"344\",\n        \"status\":\"Sent\",\n        \"createdOn\":1551871605364\n      },\n      {\n        \"id\":\"65262e7b-0143-486d-b735-630e2fb64396\",\n        \"subject\":\"Test2\",\n        \"message\":\"I will came tomorrow\",\n        \"parentMessageId\":\"556665665\",\n        \"status\":\"Sent\",\n        \"createdOn\":1552243675280\n      },\n      {\n        \"id\":\"f3de91e9-bc4b-48fb-9670-67f38dce8eec\",\n        \"subject\":\"BootCamp\",\n        \"message\":\"Tomorrow will be a boot camp of andela\",\n        \"parentMessageId\":\"556665665\",\n        \"status\":\"Sent\",\n        \"createdOn\":1552243727849\n      }\n      ]\n    \n  }\n  /**\n   * \n   * @returns {object} message object\n   */\n  create(data) {\n    const newMessage = {\n      id: uuid.v4(),\n      subject: data.subject || '',\n      message: data.message || '',\n      parentMessageId: data.parentMessageId || '',\n      status: data.status || '',\n      createdOn: moment()\n    };\n    this.messages.push(newMessage);\n    return newMessage\n  }\n  /**\n   * \n   * @param {uuid} id\n   * @returns {object} message object\n   */\n  findOne(id) {\n    return this.messages.find(mess => mess.id === id);\n  }\n  findMessages(status){\n      let readMsgs = [];\n      async.eachSeries(this.messages, (current, cb)=>{\n          if(current.status==status) readMsgs.push(current);\n          cb(null);\n      },(err)=>{\n\n      })\n      return readMsgs;\n  }\n  /**\n   * @returns {object} returns all messages\n   */\n  findAll() {\n    return this.messages;\n  }\n  \n  /**\n   * \n   * @param {uuid} id \n   */\n  delete(id) {\n    const message = this.findOne(id);\n    const index = this.messages.indexOf(message);\n    this.messages.splice(index, 1);\n    return {};\n  }\n}\nexport default new Message();"]}