"use strict";var cov_jz8y2kcy1=function(){var path="/home/giraict/Project/andela/EPICmail/server/models/Message.js";var hash="dd3d33dd567cd2437c63fb1dbbfd6207d18ebb06";var Function=function(){}.constructor;var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/home/giraict/Project/andela/EPICmail/server/models/Message.js",statementMap:{"0":{start:{line:3,column:0},end:{line:5,column:3}},"1":{start:{line:6,column:0},end:{line:6,column:25}},"2":{start:{line:8,column:14},end:{line:8,column:55}},"3":{start:{line:10,column:12},end:{line:10,column:51}},"4":{start:{line:12,column:13},end:{line:12,column:53}},"5":{start:{line:14,column:39},end:{line:14,column:93}},"6":{start:{line:16,column:50},end:{line:16,column:151}},"7":{start:{line:16,column:92},end:{line:16,column:149}},"8":{start:{line:18,column:44},end:{line:18,column:315}},"9":{start:{line:18,column:57},end:{line:18,column:58}},"10":{start:{line:18,column:102},end:{line:18,column:110}},"11":{start:{line:18,column:112},end:{line:18,column:167}},"12":{start:{line:18,column:168},end:{line:18,column:199}},"13":{start:{line:18,column:200},end:{line:18,column:254}},"14":{start:{line:18,column:227},end:{line:18,column:254}},"15":{start:{line:18,column:255},end:{line:18,column:313}},"16":{start:{line:20,column:62},end:{line:20,column:131}},"17":{start:{line:20,column:78},end:{line:20,column:131}},"18":{start:{line:20,column:132},end:{line:20,column:193}},"19":{start:{line:20,column:149},end:{line:20,column:193}},"20":{start:{line:20,column:194},end:{line:20,column:213}},"21":{start:{line:24,column:0},end:{line:125,column:3}},"22":{start:{line:30,column:4},end:{line:30,column:35}},"23":{start:{line:32,column:4},end:{line:53,column:7}},"24":{start:{line:61,column:2},end:{line:122,column:6}},"25":{start:{line:64,column:23},end:{line:71,column:7}},"26":{start:{line:72,column:6},end:{line:72,column:37}},"27":{start:{line:73,column:6},end:{line:73,column:24}},"28":{start:{line:84,column:6},end:{line:86,column:9}},"29":{start:{line:85,column:8},end:{line:85,column:30}},"30":{start:{line:91,column:21},end:{line:91,column:23}},"31":{start:{line:93,column:6},end:{line:96,column:28}},"32":{start:{line:94,column:8},end:{line:94,column:61}},"33":{start:{line:94,column:38},end:{line:94,column:61}},"34":{start:{line:95,column:8},end:{line:95,column:17}},"35":{start:{line:98,column:6},end:{line:98,column:22}},"36":{start:{line:107,column:6},end:{line:107,column:27}},"37":{start:{line:117,column:20},end:{line:117,column:36}},"38":{start:{line:118,column:18},end:{line:118,column:48}},"39":{start:{line:119,column:6},end:{line:119,column:37}},"40":{start:{line:120,column:6},end:{line:120,column:16}},"41":{start:{line:124,column:2},end:{line:124,column:17}},"42":{start:{line:127,column:15},end:{line:127,column:28}},"43":{start:{line:129,column:0},end:{line:129,column:27}}},fnMap:{"0":{name:"_interopRequireDefault",decl:{start:{line:14,column:9},end:{line:14,column:31}},loc:{start:{line:14,column:37},end:{line:14,column:95}},line:14},"1":{name:"_classCallCheck",decl:{start:{line:16,column:9},end:{line:16,column:24}},loc:{start:{line:16,column:48},end:{line:16,column:153}},line:16},"2":{name:"_defineProperties",decl:{start:{line:18,column:9},end:{line:18,column:26}},loc:{start:{line:18,column:42},end:{line:18,column:317}},line:18},"3":{name:"_createClass",decl:{start:{line:20,column:9},end:{line:20,column:21}},loc:{start:{line:20,column:60},end:{line:20,column:215}},line:20},"4":{name:"(anonymous_4)",decl:{start:{line:24,column:0},end:{line:24,column:1}},loc:{start:{line:24,column:12},end:{line:125,column:1}},line:24},"5":{name:"Message",decl:{start:{line:29,column:11},end:{line:29,column:18}},loc:{start:{line:29,column:21},end:{line:54,column:3}},line:29},"6":{name:"create",decl:{start:{line:63,column:20},end:{line:63,column:26}},loc:{start:{line:63,column:33},end:{line:74,column:5}},line:63},"7":{name:"findOne",decl:{start:{line:83,column:20},end:{line:83,column:27}},loc:{start:{line:83,column:32},end:{line:87,column:5}},line:83},"8":{name:"(anonymous_8)",decl:{start:{line:84,column:32},end:{line:84,column:33}},loc:{start:{line:84,column:48},end:{line:86,column:7}},line:84},"9":{name:"findMessages",decl:{start:{line:90,column:20},end:{line:90,column:32}},loc:{start:{line:90,column:41},end:{line:99,column:5}},line:90},"10":{name:"(anonymous_10)",decl:{start:{line:93,column:47},end:{line:93,column:48}},loc:{start:{line:93,column:70},end:{line:96,column:7}},line:93},"11":{name:"(anonymous_11)",decl:{start:{line:96,column:9},end:{line:96,column:10}},loc:{start:{line:96,column:24},end:{line:96,column:26}},line:96},"12":{name:"findAll",decl:{start:{line:106,column:20},end:{line:106,column:27}},loc:{start:{line:106,column:30},end:{line:108,column:5}},line:106},"13":{name:"_delete",decl:{start:{line:116,column:20},end:{line:116,column:27}},loc:{start:{line:116,column:32},end:{line:121,column:5}},line:116}},branchMap:{"0":{loc:{start:{line:14,column:46},end:{line:14,column:92}},type:"cond-expr",locations:[{start:{line:14,column:70},end:{line:14,column:73}},{start:{line:14,column:76},end:{line:14,column:92}}],line:14},"1":{loc:{start:{line:14,column:46},end:{line:14,column:67}},type:"binary-expr",locations:[{start:{line:14,column:46},end:{line:14,column:49}},{start:{line:14,column:53},end:{line:14,column:67}}],line:14},"2":{loc:{start:{line:16,column:50},end:{line:16,column:151}},type:"if",locations:[{start:{line:16,column:50},end:{line:16,column:151}},{start:{line:16,column:50},end:{line:16,column:151}}],line:16},"3":{loc:{start:{line:18,column:136},end:{line:18,column:166}},type:"binary-expr",locations:[{start:{line:18,column:136},end:{line:18,column:157}},{start:{line:18,column:161},end:{line:18,column:166}}],line:18},"4":{loc:{start:{line:18,column:200},end:{line:18,column:254}},type:"if",locations:[{start:{line:18,column:200},end:{line:18,column:254}},{start:{line:18,column:200},end:{line:18,column:254}}],line:18},"5":{loc:{start:{line:20,column:62},end:{line:20,column:131}},type:"if",locations:[{start:{line:20,column:62},end:{line:20,column:131}},{start:{line:20,column:62},end:{line:20,column:131}}],line:20},"6":{loc:{start:{line:20,column:132},end:{line:20,column:193}},type:"if",locations:[{start:{line:20,column:132},end:{line:20,column:193}},{start:{line:20,column:132},end:{line:20,column:193}}],line:20},"7":{loc:{start:{line:66,column:17},end:{line:66,column:35}},type:"binary-expr",locations:[{start:{line:66,column:17},end:{line:66,column:29}},{start:{line:66,column:33},end:{line:66,column:35}}],line:66},"8":{loc:{start:{line:67,column:17},end:{line:67,column:35}},type:"binary-expr",locations:[{start:{line:67,column:17},end:{line:67,column:29}},{start:{line:67,column:33},end:{line:67,column:35}}],line:67},"9":{loc:{start:{line:68,column:25},end:{line:68,column:51}},type:"binary-expr",locations:[{start:{line:68,column:25},end:{line:68,column:45}},{start:{line:68,column:49},end:{line:68,column:51}}],line:68},"10":{loc:{start:{line:69,column:16},end:{line:69,column:33}},type:"binary-expr",locations:[{start:{line:69,column:16},end:{line:69,column:27}},{start:{line:69,column:31},end:{line:69,column:33}}],line:69},"11":{loc:{start:{line:94,column:8},end:{line:94,column:61}},type:"if",locations:[{start:{line:94,column:8},end:{line:94,column:61}},{start:{line:94,column:8},end:{line:94,column:61}}],line:94}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0},b:{"0":[0,0],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0]},_coverageSchema:"43e27e138ebf9cfc5966b082cf9a028302ed4184"};var coverage=global[gcv]||(global[gcv]={});if(coverage[path]&&coverage[path].hash===hash){return coverage[path];}coverageData.hash=hash;return coverage[path]=coverageData;}();cov_jz8y2kcy1.s[0]++;Object.defineProperty(exports,"__esModule",{value:true});cov_jz8y2kcy1.s[1]++;exports.default=void 0;var _moment=(cov_jz8y2kcy1.s[2]++,_interopRequireDefault(require("moment")));var _uuid=(cov_jz8y2kcy1.s[3]++,_interopRequireDefault(require("uuid")));var _async=(cov_jz8y2kcy1.s[4]++,_interopRequireDefault(require("async")));function _interopRequireDefault(obj){cov_jz8y2kcy1.f[0]++;cov_jz8y2kcy1.s[5]++;return(cov_jz8y2kcy1.b[1][0]++,obj)&&(cov_jz8y2kcy1.b[1][1]++,obj.__esModule)?(cov_jz8y2kcy1.b[0][0]++,obj):(cov_jz8y2kcy1.b[0][1]++,{default:obj});}function _classCallCheck(instance,Constructor){cov_jz8y2kcy1.f[1]++;cov_jz8y2kcy1.s[6]++;if(!(instance instanceof Constructor)){cov_jz8y2kcy1.b[2][0]++;cov_jz8y2kcy1.s[7]++;throw new TypeError("Cannot call a class as a function");}else{cov_jz8y2kcy1.b[2][1]++;}}function _defineProperties(target,props){cov_jz8y2kcy1.f[2]++;cov_jz8y2kcy1.s[8]++;for(var i=(cov_jz8y2kcy1.s[9]++,0);i<props.length;i++){var descriptor=(cov_jz8y2kcy1.s[10]++,props[i]);cov_jz8y2kcy1.s[11]++;descriptor.enumerable=(cov_jz8y2kcy1.b[3][0]++,descriptor.enumerable)||(cov_jz8y2kcy1.b[3][1]++,false);cov_jz8y2kcy1.s[12]++;descriptor.configurable=true;cov_jz8y2kcy1.s[13]++;if("value"in descriptor){cov_jz8y2kcy1.b[4][0]++;cov_jz8y2kcy1.s[14]++;descriptor.writable=true;}else{cov_jz8y2kcy1.b[4][1]++;}cov_jz8y2kcy1.s[15]++;Object.defineProperty(target,descriptor.key,descriptor);}}function _createClass(Constructor,protoProps,staticProps){cov_jz8y2kcy1.f[3]++;cov_jz8y2kcy1.s[16]++;if(protoProps){cov_jz8y2kcy1.b[5][0]++;cov_jz8y2kcy1.s[17]++;_defineProperties(Constructor.prototype,protoProps);}else{cov_jz8y2kcy1.b[5][1]++;}cov_jz8y2kcy1.s[18]++;if(staticProps){cov_jz8y2kcy1.b[6][0]++;cov_jz8y2kcy1.s[19]++;_defineProperties(Constructor,staticProps);}else{cov_jz8y2kcy1.b[6][1]++;}cov_jz8y2kcy1.s[20]++;return Constructor;}var Message=(/*#__PURE__*/cov_jz8y2kcy1.s[21]++,function(){cov_jz8y2kcy1.f[4]++;/**
   * class constructor
   * @param {object} data
   */function Message(){cov_jz8y2kcy1.f[5]++;cov_jz8y2kcy1.s[22]++;_classCallCheck(this,Message);cov_jz8y2kcy1.s[23]++;this.messages=[{"id":"d1081ada-49d5-4a0a-b97e-e10b85ba68eb","subject":"Test","message":"I will came","parentMessageId":"344","status":"Sent","createdOn":1551871605364},{"id":"65262e7b-0143-486d-b735-630e2fb64396","subject":"Test2","message":"I will came tomorrow","parentMessageId":"556665665","status":"Sent","createdOn":1552243675280},{"id":"f3de91e9-bc4b-48fb-9670-67f38dce8eec","subject":"BootCamp","message":"Tomorrow will be a boot camp of andela","parentMessageId":"556665665","status":"Sent","createdOn":1552243727849}];}/**
   * 
   * @returns {object} message object
   */cov_jz8y2kcy1.s[24]++;_createClass(Message,[{key:"create",value:function create(data){cov_jz8y2kcy1.f[6]++;var newMessage=(cov_jz8y2kcy1.s[25]++,{id:_uuid.default.v4(),subject:(cov_jz8y2kcy1.b[7][0]++,data.subject)||(cov_jz8y2kcy1.b[7][1]++,''),message:(cov_jz8y2kcy1.b[8][0]++,data.message)||(cov_jz8y2kcy1.b[8][1]++,''),parentMessageId:(cov_jz8y2kcy1.b[9][0]++,data.parentMessageId)||(cov_jz8y2kcy1.b[9][1]++,''),status:(cov_jz8y2kcy1.b[10][0]++,data.status)||(cov_jz8y2kcy1.b[10][1]++,''),createdOn:(0,_moment.default)()});cov_jz8y2kcy1.s[26]++;this.messages.push(newMessage);cov_jz8y2kcy1.s[27]++;return newMessage;}/**
     * 
     * @param {uuid} id
     * @returns {object} message object
     */},{key:"findOne",value:function findOne(id){cov_jz8y2kcy1.f[7]++;cov_jz8y2kcy1.s[28]++;return this.messages.find(function(mess){cov_jz8y2kcy1.f[8]++;cov_jz8y2kcy1.s[29]++;return mess.id===id;});}},{key:"findMessages",value:function findMessages(status){cov_jz8y2kcy1.f[9]++;var readMsgs=(cov_jz8y2kcy1.s[30]++,[]);cov_jz8y2kcy1.s[31]++;_async.default.eachSeries(this.messages,function(current,cb){cov_jz8y2kcy1.f[10]++;cov_jz8y2kcy1.s[32]++;if(current.status==status){cov_jz8y2kcy1.b[11][0]++;cov_jz8y2kcy1.s[33]++;readMsgs.push(current);}else{cov_jz8y2kcy1.b[11][1]++;}cov_jz8y2kcy1.s[34]++;cb(null);},function(err){cov_jz8y2kcy1.f[11]++;});cov_jz8y2kcy1.s[35]++;return readMsgs;}/**
     * @returns {object} returns all messages
     */},{key:"findAll",value:function findAll(){cov_jz8y2kcy1.f[12]++;cov_jz8y2kcy1.s[36]++;return this.messages;}/**
     * 
     * @param {uuid} id 
     */},{key:"delete",value:function _delete(id){cov_jz8y2kcy1.f[13]++;var message=(cov_jz8y2kcy1.s[37]++,this.findOne(id));var index=(cov_jz8y2kcy1.s[38]++,this.messages.indexOf(message));cov_jz8y2kcy1.s[39]++;this.messages.splice(index,1);cov_jz8y2kcy1.s[40]++;return{};}}]);cov_jz8y2kcy1.s[41]++;return Message;}());var _default=(cov_jz8y2kcy1.s[42]++,new Message());cov_jz8y2kcy1.s[43]++;exports.default=_default;//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIk1lc3NhZ2UuanMiXSwibmFtZXMiOlsiTWVzc2FnZSIsIm1lc3NhZ2VzIiwiZGF0YSIsIm5ld01lc3NhZ2UiLCJpZCIsInV1aWQiLCJ2NCIsInN1YmplY3QiLCJtZXNzYWdlIiwicGFyZW50TWVzc2FnZUlkIiwic3RhdHVzIiwiY3JlYXRlZE9uIiwicHVzaCIsImZpbmQiLCJtZXNzIiwicmVhZE1zZ3MiLCJhc3luYyIsImVhY2hTZXJpZXMiLCJjdXJyZW50IiwiY2IiLCJlcnIiLCJmaW5kT25lIiwiaW5kZXgiLCJpbmRleE9mIiwic3BsaWNlIl0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUE7O0FBQ0E7O0FBQ0E7Ozs7Ozs7Ozs7SUFFTUEsTzs7O0FBQ0o7Ozs7QUFJQSxxQkFBYztBQUFBOztBQUNaLFNBQUtDLFFBQUwsR0FBZ0IsQ0FDZDtBQUNFLFlBQUssc0NBRFA7QUFFRSxpQkFBVSxNQUZaO0FBR0UsaUJBQVUsYUFIWjtBQUlFLHlCQUFrQixLQUpwQjtBQUtFLGdCQUFTLE1BTFg7QUFNRSxtQkFBWTtBQU5kLEtBRGMsRUFTZDtBQUNFLFlBQUssc0NBRFA7QUFFRSxpQkFBVSxPQUZaO0FBR0UsaUJBQVUsc0JBSFo7QUFJRSx5QkFBa0IsV0FKcEI7QUFLRSxnQkFBUyxNQUxYO0FBTUUsbUJBQVk7QUFOZCxLQVRjLEVBaUJkO0FBQ0UsWUFBSyxzQ0FEUDtBQUVFLGlCQUFVLFVBRlo7QUFHRSxpQkFBVSx3Q0FIWjtBQUlFLHlCQUFrQixXQUpwQjtBQUtFLGdCQUFTLE1BTFg7QUFNRSxtQkFBWTtBQU5kLEtBakJjLENBQWhCO0FBMkJEO0FBQ0Q7Ozs7Ozs7OzJCQUlPQyxJLEVBQU07QUFDWCxVQUFNQyxVQUFVLEdBQUc7QUFDakJDLFFBQUFBLEVBQUUsRUFBRUMsY0FBS0MsRUFBTCxFQURhO0FBRWpCQyxRQUFBQSxPQUFPLEVBQUVMLElBQUksQ0FBQ0ssT0FBTCxJQUFnQixFQUZSO0FBR2pCQyxRQUFBQSxPQUFPLEVBQUVOLElBQUksQ0FBQ00sT0FBTCxJQUFnQixFQUhSO0FBSWpCQyxRQUFBQSxlQUFlLEVBQUVQLElBQUksQ0FBQ08sZUFBTCxJQUF3QixFQUp4QjtBQUtqQkMsUUFBQUEsTUFBTSxFQUFFUixJQUFJLENBQUNRLE1BQUwsSUFBZSxFQUxOO0FBTWpCQyxRQUFBQSxTQUFTLEVBQUU7QUFOTSxPQUFuQjtBQVFBLFdBQUtWLFFBQUwsQ0FBY1csSUFBZCxDQUFtQlQsVUFBbkI7QUFDQSxhQUFPQSxVQUFQO0FBQ0Q7QUFDRDs7Ozs7Ozs7NEJBS1FDLEUsRUFBSTtBQUNWLGFBQU8sS0FBS0gsUUFBTCxDQUFjWSxJQUFkLENBQW1CLFVBQUFDLElBQUk7QUFBQSxlQUFJQSxJQUFJLENBQUNWLEVBQUwsS0FBWUEsRUFBaEI7QUFBQSxPQUF2QixDQUFQO0FBQ0Q7OztpQ0FDWU0sTSxFQUFPO0FBQ2hCLFVBQUlLLFFBQVEsR0FBRyxFQUFmOztBQUNBQyxxQkFBTUMsVUFBTixDQUFpQixLQUFLaEIsUUFBdEIsRUFBZ0MsVUFBQ2lCLE9BQUQsRUFBVUMsRUFBVixFQUFlO0FBQzNDLFlBQUdELE9BQU8sQ0FBQ1IsTUFBUixJQUFnQkEsTUFBbkIsRUFBMkJLLFFBQVEsQ0FBQ0gsSUFBVCxDQUFjTSxPQUFkO0FBQzNCQyxRQUFBQSxFQUFFLENBQUMsSUFBRCxDQUFGO0FBQ0gsT0FIRCxFQUdFLFVBQUNDLEdBQUQsRUFBTyxDQUVSLENBTEQ7O0FBTUEsYUFBT0wsUUFBUDtBQUNIO0FBQ0Q7Ozs7Ozs4QkFHVTtBQUNSLGFBQU8sS0FBS2QsUUFBWjtBQUNEO0FBRUQ7Ozs7Ozs7NEJBSU9HLEUsRUFBSTtBQUNULFVBQU1JLE9BQU8sR0FBRyxLQUFLYSxPQUFMLENBQWFqQixFQUFiLENBQWhCO0FBQ0EsVUFBTWtCLEtBQUssR0FBRyxLQUFLckIsUUFBTCxDQUFjc0IsT0FBZCxDQUFzQmYsT0FBdEIsQ0FBZDtBQUNBLFdBQUtQLFFBQUwsQ0FBY3VCLE1BQWQsQ0FBcUJGLEtBQXJCLEVBQTRCLENBQTVCO0FBQ0EsYUFBTyxFQUFQO0FBQ0Q7Ozs7OztlQUVZLElBQUl0QixPQUFKLEUiLCJzb3VyY2VSb290IjoiL2hvbWUvZ2lyYWljdC9Qcm9qZWN0L2FuZGVsYS9FUElDbWFpbC9zZXJ2ZXIvbW9kZWxzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IG1vbWVudCBmcm9tICdtb21lbnQnO1xuaW1wb3J0IHV1aWQgZnJvbSAndXVpZCc7XG5pbXBvcnQgYXN5bmMgZnJvbSAnYXN5bmMnO1xuXG5jbGFzcyBNZXNzYWdlIHtcbiAgLyoqXG4gICAqIGNsYXNzIGNvbnN0cnVjdG9yXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBkYXRhXG4gICAqL1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICB0aGlzLm1lc3NhZ2VzID0gW1xuICAgICAge1xuICAgICAgICBcImlkXCI6XCJkMTA4MWFkYS00OWQ1LTRhMGEtYjk3ZS1lMTBiODViYTY4ZWJcIixcbiAgICAgICAgXCJzdWJqZWN0XCI6XCJUZXN0XCIsXG4gICAgICAgIFwibWVzc2FnZVwiOlwiSSB3aWxsIGNhbWVcIixcbiAgICAgICAgXCJwYXJlbnRNZXNzYWdlSWRcIjpcIjM0NFwiLFxuICAgICAgICBcInN0YXR1c1wiOlwiU2VudFwiLFxuICAgICAgICBcImNyZWF0ZWRPblwiOjE1NTE4NzE2MDUzNjRcbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIFwiaWRcIjpcIjY1MjYyZTdiLTAxNDMtNDg2ZC1iNzM1LTYzMGUyZmI2NDM5NlwiLFxuICAgICAgICBcInN1YmplY3RcIjpcIlRlc3QyXCIsXG4gICAgICAgIFwibWVzc2FnZVwiOlwiSSB3aWxsIGNhbWUgdG9tb3Jyb3dcIixcbiAgICAgICAgXCJwYXJlbnRNZXNzYWdlSWRcIjpcIjU1NjY2NTY2NVwiLFxuICAgICAgICBcInN0YXR1c1wiOlwiU2VudFwiLFxuICAgICAgICBcImNyZWF0ZWRPblwiOjE1NTIyNDM2NzUyODBcbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIFwiaWRcIjpcImYzZGU5MWU5LWJjNGItNDhmYi05NjcwLTY3ZjM4ZGNlOGVlY1wiLFxuICAgICAgICBcInN1YmplY3RcIjpcIkJvb3RDYW1wXCIsXG4gICAgICAgIFwibWVzc2FnZVwiOlwiVG9tb3Jyb3cgd2lsbCBiZSBhIGJvb3QgY2FtcCBvZiBhbmRlbGFcIixcbiAgICAgICAgXCJwYXJlbnRNZXNzYWdlSWRcIjpcIjU1NjY2NTY2NVwiLFxuICAgICAgICBcInN0YXR1c1wiOlwiU2VudFwiLFxuICAgICAgICBcImNyZWF0ZWRPblwiOjE1NTIyNDM3Mjc4NDlcbiAgICAgIH1cbiAgICAgIF1cbiAgICBcbiAgfVxuICAvKipcbiAgICogXG4gICAqIEByZXR1cm5zIHtvYmplY3R9IG1lc3NhZ2Ugb2JqZWN0XG4gICAqL1xuICBjcmVhdGUoZGF0YSkge1xuICAgIGNvbnN0IG5ld01lc3NhZ2UgPSB7XG4gICAgICBpZDogdXVpZC52NCgpLFxuICAgICAgc3ViamVjdDogZGF0YS5zdWJqZWN0IHx8ICcnLFxuICAgICAgbWVzc2FnZTogZGF0YS5tZXNzYWdlIHx8ICcnLFxuICAgICAgcGFyZW50TWVzc2FnZUlkOiBkYXRhLnBhcmVudE1lc3NhZ2VJZCB8fCAnJyxcbiAgICAgIHN0YXR1czogZGF0YS5zdGF0dXMgfHwgJycsXG4gICAgICBjcmVhdGVkT246IG1vbWVudCgpXG4gICAgfTtcbiAgICB0aGlzLm1lc3NhZ2VzLnB1c2gobmV3TWVzc2FnZSk7XG4gICAgcmV0dXJuIG5ld01lc3NhZ2VcbiAgfVxuICAvKipcbiAgICogXG4gICAqIEBwYXJhbSB7dXVpZH0gaWRcbiAgICogQHJldHVybnMge29iamVjdH0gbWVzc2FnZSBvYmplY3RcbiAgICovXG4gIGZpbmRPbmUoaWQpIHtcbiAgICByZXR1cm4gdGhpcy5tZXNzYWdlcy5maW5kKG1lc3MgPT4gbWVzcy5pZCA9PT0gaWQpO1xuICB9XG4gIGZpbmRNZXNzYWdlcyhzdGF0dXMpe1xuICAgICAgbGV0IHJlYWRNc2dzID0gW107XG4gICAgICBhc3luYy5lYWNoU2VyaWVzKHRoaXMubWVzc2FnZXMsIChjdXJyZW50LCBjYik9PntcbiAgICAgICAgICBpZihjdXJyZW50LnN0YXR1cz09c3RhdHVzKSByZWFkTXNncy5wdXNoKGN1cnJlbnQpO1xuICAgICAgICAgIGNiKG51bGwpO1xuICAgICAgfSwoZXJyKT0+e1xuXG4gICAgICB9KVxuICAgICAgcmV0dXJuIHJlYWRNc2dzO1xuICB9XG4gIC8qKlxuICAgKiBAcmV0dXJucyB7b2JqZWN0fSByZXR1cm5zIGFsbCBtZXNzYWdlc1xuICAgKi9cbiAgZmluZEFsbCgpIHtcbiAgICByZXR1cm4gdGhpcy5tZXNzYWdlcztcbiAgfVxuICBcbiAgLyoqXG4gICAqIFxuICAgKiBAcGFyYW0ge3V1aWR9IGlkIFxuICAgKi9cbiAgZGVsZXRlKGlkKSB7XG4gICAgY29uc3QgbWVzc2FnZSA9IHRoaXMuZmluZE9uZShpZCk7XG4gICAgY29uc3QgaW5kZXggPSB0aGlzLm1lc3NhZ2VzLmluZGV4T2YobWVzc2FnZSk7XG4gICAgdGhpcy5tZXNzYWdlcy5zcGxpY2UoaW5kZXgsIDEpO1xuICAgIHJldHVybiB7fTtcbiAgfVxufVxuZXhwb3J0IGRlZmF1bHQgbmV3IE1lc3NhZ2UoKTsiXX0=