{"version":3,"sources":["Message.js"],"names":["Message","messages","data","newMessage","id","uuid","v4","subject","message","parentMessageId","status","createdOn","moment","now","push","find","mess","readMsgs","async","eachSeries","current","cb","err","findOne","index","indexOf","splice"],"mappings":";;;;;;;;AAAA;;;;AACA;;;;AACA;;;;;;;;IAEMA,O;AACJ;;;;AAIA,qBAAc;AAAA;;AACZ,SAAKC,QAAL,GAAgB,CACZ;AACI,YAAM,sCADV;AAEI,iBAAW,IAFf;AAGI,iBAAW,YAHf;AAII,yBAAmB,QAJvB;AAKI,gBAAU,QALd;AAMI,mBAAa;AANjB,KADY,EASZ;AACI,YAAM,sCADV;AAEI,iBAAW,MAFf;AAGI,iBAAW,aAHf;AAII,yBAAmB,KAJvB;AAKI,gBAAU,MALd;AAMI,mBAAa;AANjB,KATY,CAAhB;AAkBD;AACD;;;;;;;;2BAIOC,I,EAAM;AACX,UAAMC,aAAa;AACjBC,YAAIC,eAAKC,EAAL,EADa;AAEjBC,iBAASL,KAAKK,OAAL,IAAgB,EAFR;AAGjBC,iBAASN,KAAKM,OAAL,IAAgB,EAHR;AAIjBC,yBAAiBP,KAAKO,eAAL,IAAwB,EAJxB;AAKjBC,gBAAQR,KAAKQ,MAAL,IAAe,EALN;AAMjBC,mBAAWC,iBAAOC,GAAP;AANM,OAAnB;AAQA,WAAKZ,QAAL,CAAca,IAAd,CAAmBX,UAAnB;AACA,aAAOA,UAAP;AACD;AACD;;;;;;;;4BAKQC,E,EAAI;AACV,aAAO,KAAKH,QAAL,CAAcc,IAAd,CAAmB;AAAA,eAAQC,KAAKZ,EAAL,KAAYA,EAApB;AAAA,OAAnB,CAAP;AACD;;;iCACYM,M,EAAO;AAChB,UAAIO,WAAW,EAAf;AACAC,sBAAMC,UAAN,CAAiB,KAAKlB,QAAtB,EAAgC,UAACmB,OAAD,EAAUC,EAAV,EAAe;AAC3C,YAAGD,QAAQV,MAAR,IAAgBA,MAAnB,EAA2BO,SAASH,IAAT,CAAcM,OAAd;AAC3BC,WAAG,IAAH;AACH,OAHD,EAGE,UAACC,GAAD,EAAO,CAER,CALD;AAMA,aAAOL,QAAP;AACH;AACD;;;;;;8BAGU;AACR,aAAO,KAAKhB,QAAZ;AACD;;AAED;;;;;;;4BAIOG,E,EAAI;AACT,UAAMI,UAAU,KAAKe,OAAL,CAAanB,EAAb,CAAhB;AACA,UAAMoB,QAAQ,KAAKvB,QAAL,CAAcwB,OAAd,CAAsBjB,OAAtB,CAAd;AACA,WAAKP,QAAL,CAAcyB,MAAd,CAAqBF,KAArB,EAA4B,CAA5B;AACA,aAAO,EAAP;AACD;;;;;;kBAEY,IAAIxB,OAAJ,E","file":"Message.js","sourceRoot":"/home/giraict/Project/andela/EPICmail/server/models","sourcesContent":["import moment from 'moment';\nimport uuid from 'uuid';\nimport async from 'async';\n\nclass Message {\n  /**\n   * class constructor\n   * @param {object} data\n   */\n  constructor() {\n    this.messages = [\n        {\n            \"id\": \"ae0f724b-8f6d-4234-877a-1848ca412f41\",\n            \"subject\": \"Hi\",\n            \"message\": \"cn ufjv dk\",\n            \"parentMessageId\": \"KALISA\",\n            \"status\": \"Unread\",\n            \"createdOn\": 1551871527723\n        },\n        {\n            \"id\": \"d1081ada-49d5-4a0a-b97e-e10b85ba68eb\",\n            \"subject\": \"Test\",\n            \"message\": \"I will came\",\n            \"parentMessageId\": \"344\",\n            \"status\": \"Sent\",\n            \"createdOn\": 1551871605364\n        }\n    ]\n  }\n  /**\n   * \n   * @returns {object} message object\n   */\n  create(data) {\n    const newMessage = {\n      id: uuid.v4(),\n      subject: data.subject || '',\n      message: data.message || '',\n      parentMessageId: data.parentMessageId || '',\n      status: data.status || '',\n      createdOn: moment.now()\n    };\n    this.messages.push(newMessage);\n    return newMessage\n  }\n  /**\n   * \n   * @param {uuid} id\n   * @returns {object} message object\n   */\n  findOne(id) {\n    return this.messages.find(mess => mess.id === id);\n  }\n  findMessages(status){\n      let readMsgs = [];\n      async.eachSeries(this.messages, (current, cb)=>{\n          if(current.status==status) readMsgs.push(current);\n          cb(null);\n      },(err)=>{\n\n      })\n      return readMsgs;\n  }\n  /**\n   * @returns {object} returns all messages\n   */\n  findAll() {\n    return this.messages;\n  }\n  \n  /**\n   * \n   * @param {uuid} id \n   */\n  delete(id) {\n    const message = this.findOne(id);\n    const index = this.messages.indexOf(message);\n    this.messages.splice(index, 1);\n    return {};\n  }\n}\nexport default new Message();"]}