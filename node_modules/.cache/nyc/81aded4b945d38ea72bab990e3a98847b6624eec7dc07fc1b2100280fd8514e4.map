{"version":3,"sources":["test.js"],"names":["chai","use","chaiHttp","should","describe","it","done","request","server","get","end","err","res","have","status","body","be","a","message","Message","save","id","send","property","eql","createmessage","parentMessageId","createdOn","post","subject"],"mappings":"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","sourceRoot":"/home/giraict/Project/andela/EPICmail/server/tests","sourcesContent":["import chai from 'chai';\nimport chaiHttp from 'chai-http';\nimport server from '../server';\nimport Message from '../models/Message';\nchai.use(chaiHttp);\nchai.should();\n\n/*\n  * Test the /GET route\n  */\n describe('/Get All messages', () => {\n    it('it should GET all emails/messages', (done) => {\n      chai.request(server)\n          .get('/api/v1/messages')\n          .end((err, res) => {\n                res.should.have.status(200);\n                res.body.should.be.a('array');\n            done();\n          });\n    });\n});\n\ndescribe('/Get Unread messages', () => {\n  it('it should GET all Unread messages', (done) => {\n    chai.request(server)\n        .get('/api/v1/messages/unread')\n        .end((err, res) => {\n              res.should.have.status(200);\n              res.body.should.be.a('array');\n          done();\n        });\n  });\n});\n\ndescribe('/Get Sent messages', () => {\n  it('it should GET all sent messages', (done) => {\n    chai.request(server)\n        .get('/api/v1/messages/sent')\n        .end((err, res) => {\n              res.should.have.status(200);\n              res.body.should.be.a('array');\n          done();\n        });\n  });\n});\n\n\n\ndescribe('/GET/:id book', () => {\n  it('it should GET a book by the given id', (done) => {\n      let message = new Message({ \n        \"id\":\"65262e7b-0143-486d-b735-630e2fb64396\",\n        \"subject\":\"Test2\",\n        \"message\":\"I will came tomorrow\",\n        \"parentMessageId\":\"556665665\",\n        \"status\":\"Sent\",\n        \"createdOn\":1552243675280\n      });\n      message.save((err, message) => {\n          chai.request(server)\n        .get('/api/v1/messages' + message.id)\n        .send(message)\n        .end((err, res) => {\n              res.should.have.status(200);\n              res.body.should.be.a('object');\n              res.body.should.have.property('subject');\n              res.body.should.have.property('message');\n              res.body.should.have.property('parentMessageId');\n              res.body.should.have.property('status');\n              res.body.should.have.property('createdOn');\n              res.body.should.have.property('_id').eql(message.id);\n          done();\n        });\n      });\n\n  });\n});\n\n\n\n// Post\n\ndescribe('/POST message', () => {\n  it('it should not POST a message without subject field', (done) => {\n      let createmessage = {\n        id:\"65262e7b-0143-486d-b735-630e2fb64396\",\n        message:\"I will came tomorrow\",\n        parentMessageId:\"556665665\",\n        status:\"Sent\",\n        createdOn:1552243675280\n      }\n        chai.request(server)\n        .post('/api/v1/messages')\n        .send(createmessage)\n        .end((err, res) => {\n              res.should.have.status(200);\n              res.body.should.be.a('object');\n              res.body.should.have.property('errors');\n              // res.body.errors.should.have.property('subject');\n              // res.body.errors.pages.should.have.property('kind').eql('required');\n          done();\n        });\n  });\n  it('it should POST a message ', (done) => {\n      let createmessage = {\n        id:\"65262e7b-0143-486d-b735-630e2fb64396\",\n        subject:\"Test2\",\n        message:\"I will came tomorrow\",\n        parentMessageId:\"556665665\",\n        status:\"Sent\",\n        createdOn:1552243675280\n      }\n        chai.request(server)\n        .post('/api/v1/messages')\n        .send(createmessage)\n        .end((err, res) => {\n              res.should.have.status(200);\n              res.body.should.be.a('object');\n              res.body.should.have.property('message').eql('Message successfully sent!');\n              res.body.createmessage.should.have.property('id');\n              res.body.createmessage.should.have.property('subject');\n              res.body.createmessage.should.have.property('message');\n              res.body.createmessage.should.have.property('parentMessageId');\n              res.body.createmessage.should.have.property('status');\n              res.body.createmessage.should.have.property('createdOn');\n          done();\n        });\n  });\n});"]}