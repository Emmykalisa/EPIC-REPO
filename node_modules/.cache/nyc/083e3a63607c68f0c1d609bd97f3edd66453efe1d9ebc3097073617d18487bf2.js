'use strict';var cov_192mqluysj=function(){var path="/home/giraict/Project/andela/EPICmail/build/controllers/Message.js";var hash="fced3c1f0744250f739fecefa1ebf863ba00b863";var Function=function(){}.constructor;var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/home/giraict/Project/andela/EPICmail/build/controllers/Message.js",statementMap:{"0":{start:{line:3,column:0},end:{line:5,column:3}},"1":{start:{line:7,column:15},end:{line:7,column:43}},"2":{start:{line:9,column:16},end:{line:9,column:48}},"3":{start:{line:12,column:2},end:{line:12,column:56}},"4":{start:{line:15,column:14},end:{line:97,column:1}},"5":{start:{line:23,column:4},end:{line:25,column:5}},"6":{start:{line:24,column:6},end:{line:24,column:76}},"7":{start:{line:26,column:18},end:{line:26,column:52}},"8":{start:{line:27,column:4},end:{line:27,column:41}},"9":{start:{line:37,column:19},end:{line:37,column:46}},"10":{start:{line:38,column:4},end:{line:38,column:42}},"11":{start:{line:48,column:18},end:{line:48,column:58}},"12":{start:{line:49,column:4},end:{line:51,column:5}},"13":{start:{line:50,column:6},end:{line:50,column:70}},"14":{start:{line:52,column:4},end:{line:52,column:41}},"15":{start:{line:62,column:19},end:{line:62,column:59}},"16":{start:{line:63,column:4},end:{line:65,column:5}},"17":{start:{line:64,column:6},end:{line:64,column:70}},"18":{start:{line:66,column:4},end:{line:66,column:42}},"19":{start:{line:76,column:19},end:{line:76,column:57}},"20":{start:{line:77,column:4},end:{line:79,column:5}},"21":{start:{line:78,column:6},end:{line:78,column:70}},"22":{start:{line:80,column:4},end:{line:80,column:42}},"23":{start:{line:90,column:18},end:{line:90,column:58}},"24":{start:{line:91,column:4},end:{line:93,column:5}},"25":{start:{line:92,column:6},end:{line:92,column:70}},"26":{start:{line:94,column:14},end:{line:94,column:53}},"27":{start:{line:95,column:4},end:{line:95,column:37}},"28":{start:{line:99,column:0},end:{line:99,column:26}}},fnMap:{"0":{name:"_interopRequireDefault",decl:{start:{line:11,column:9},end:{line:11,column:31}},loc:{start:{line:11,column:37},end:{line:13,column:1}},line:11},"1":{name:"create",decl:{start:{line:22,column:19},end:{line:22,column:25}},loc:{start:{line:22,column:36},end:{line:28,column:3}},line:22},"2":{name:"getAll",decl:{start:{line:36,column:19},end:{line:36,column:25}},loc:{start:{line:36,column:36},end:{line:39,column:3}},line:36},"3":{name:"getOne",decl:{start:{line:47,column:19},end:{line:47,column:25}},loc:{start:{line:47,column:36},end:{line:53,column:3}},line:47},"4":{name:"getUnread",decl:{start:{line:61,column:22},end:{line:61,column:31}},loc:{start:{line:61,column:42},end:{line:67,column:3}},line:61},"5":{name:"getSent",decl:{start:{line:75,column:20},end:{line:75,column:27}},loc:{start:{line:75,column:38},end:{line:81,column:3}},line:75},"6":{name:"_delete",decl:{start:{line:89,column:19},end:{line:89,column:26}},loc:{start:{line:89,column:37},end:{line:96,column:3}},line:89}},branchMap:{"0":{loc:{start:{line:12,column:9},end:{line:12,column:55}},type:"cond-expr",locations:[{start:{line:12,column:33},end:{line:12,column:36}},{start:{line:12,column:39},end:{line:12,column:55}}],line:12},"1":{loc:{start:{line:12,column:9},end:{line:12,column:30}},type:"binary-expr",locations:[{start:{line:12,column:9},end:{line:12,column:12}},{start:{line:12,column:16},end:{line:12,column:30}}],line:12},"2":{loc:{start:{line:23,column:4},end:{line:25,column:5}},type:"if",locations:[{start:{line:23,column:4},end:{line:25,column:5}},{start:{line:23,column:4},end:{line:25,column:5}}],line:23},"3":{loc:{start:{line:23,column:8},end:{line:23,column:95}},type:"binary-expr",locations:[{start:{line:23,column:8},end:{line:23,column:25}},{start:{line:23,column:29},end:{line:23,column:46}},{start:{line:23,column:50},end:{line:23,column:75}},{start:{line:23,column:79},end:{line:23,column:95}}],line:23},"4":{loc:{start:{line:49,column:4},end:{line:51,column:5}},type:"if",locations:[{start:{line:49,column:4},end:{line:51,column:5}},{start:{line:49,column:4},end:{line:51,column:5}}],line:49},"5":{loc:{start:{line:63,column:4},end:{line:65,column:5}},type:"if",locations:[{start:{line:63,column:4},end:{line:65,column:5}},{start:{line:63,column:4},end:{line:65,column:5}}],line:63},"6":{loc:{start:{line:77,column:4},end:{line:79,column:5}},type:"if",locations:[{start:{line:77,column:4},end:{line:79,column:5}},{start:{line:77,column:4},end:{line:79,column:5}}],line:77},"7":{loc:{start:{line:91,column:4},end:{line:93,column:5}},type:"if",locations:[{start:{line:91,column:4},end:{line:93,column:5}},{start:{line:91,column:4},end:{line:93,column:5}}],line:91}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0},b:{"0":[0,0],"1":[0,0],"2":[0,0],"3":[0,0,0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0]},_coverageSchema:"43e27e138ebf9cfc5966b082cf9a028302ed4184"};var coverage=global[gcv]||(global[gcv]={});if(coverage[path]&&coverage[path].hash===hash){return coverage[path];}coverageData.hash=hash;return coverage[path]=coverageData;}();cov_192mqluysj.s[0]++;Object.defineProperty(exports,"__esModule",{value:true});var _Message=(cov_192mqluysj.s[1]++,require('../models/Message'));var _Message2=(cov_192mqluysj.s[2]++,_interopRequireDefault(_Message));function _interopRequireDefault(obj){cov_192mqluysj.f[0]++;cov_192mqluysj.s[3]++;return(cov_192mqluysj.b[1][0]++,obj)&&(cov_192mqluysj.b[1][1]++,obj.__esModule)?(cov_192mqluysj.b[0][0]++,obj):(cov_192mqluysj.b[0][1]++,{default:obj});}var Message=(cov_192mqluysj.s[4]++,{/**
   * 
   * @param {object} req 
   * @param {object} res
   * @returns {object} message object 
   */create:function create(req,res){cov_192mqluysj.f[1]++;cov_192mqluysj.s[5]++;if((cov_192mqluysj.b[3][0]++,!req.body.subject)&&(cov_192mqluysj.b[3][1]++,!req.body.message)&&(cov_192mqluysj.b[3][2]++,!req.body.parentMessageId)&&(cov_192mqluysj.b[3][3]++,!req.body.status)){cov_192mqluysj.b[2][0]++;cov_192mqluysj.s[6]++;return res.status(400).send({'message':'All fields are required'});}else{cov_192mqluysj.b[2][1]++;}var message=(cov_192mqluysj.s[7]++,_Message2.default.create(req.body));cov_192mqluysj.s[8]++;return res.status(200).send(message);},/**
   * 
   * @param {object} req 
   * @param {object} res 
   * @returns {object} messages array
   */getAll:function getAll(req,res){cov_192mqluysj.f[2]++;var messages=(cov_192mqluysj.s[9]++,_Message2.default.findAll());cov_192mqluysj.s[10]++;return res.status(200).send(messages);},/**
   * 
   * @param {object} req 
   * @param {object} res
   * @returns {object} message object
   */getOne:function getOne(req,res){cov_192mqluysj.f[3]++;var message=(cov_192mqluysj.s[11]++,_Message2.default.findOne(req.params.id));cov_192mqluysj.s[12]++;if(!message){cov_192mqluysj.b[4][0]++;cov_192mqluysj.s[13]++;return res.status(400).send({'message':'message not found'});}else{cov_192mqluysj.b[4][1]++;}cov_192mqluysj.s[14]++;return res.status(200).send(message);},/**
   * 
   * @param {object} req 
   * @param {object} res
   * @returns {object} message object
   */getUnread:function getUnread(req,res){cov_192mqluysj.f[4]++;var messages=(cov_192mqluysj.s[15]++,_Message2.default.findMessages('Unread'));cov_192mqluysj.s[16]++;if(!messages){cov_192mqluysj.b[5][0]++;cov_192mqluysj.s[17]++;return res.status(400).send({'message':'message not found'});}else{cov_192mqluysj.b[5][1]++;}cov_192mqluysj.s[18]++;return res.status(200).send(messages);},/**
   * 
   * @param {object} req 
   * @param {object} res
   * @returns {object} message object
   */getSent:function getSent(req,res){cov_192mqluysj.f[5]++;var messages=(cov_192mqluysj.s[19]++,_Message2.default.findMessages('Sent'));cov_192mqluysj.s[20]++;if(!messages){cov_192mqluysj.b[6][0]++;cov_192mqluysj.s[21]++;return res.status(400).send({'message':'message not found'});}else{cov_192mqluysj.b[6][1]++;}cov_192mqluysj.s[22]++;return res.status(200).send(messages);},/**
   * 
   * @param {object} req 
   * @param {object} res 
   * @returns {void} return statuc code 204 
   */delete:function _delete(req,res){cov_192mqluysj.f[6]++;var message=(cov_192mqluysj.s[23]++,_Message2.default.findOne(req.params.id));cov_192mqluysj.s[24]++;if(!message){cov_192mqluysj.b[7][0]++;cov_192mqluysj.s[25]++;return res.status(400).send({'message':'message not found'});}else{cov_192mqluysj.b[7][1]++;}var mes=(cov_192mqluysj.s[26]++,_Message2.default.delete(req.params.id));cov_192mqluysj.s[27]++;return res.status(200).send(mes);}});cov_192mqluysj.s[28]++;exports.default=Message;//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIk1lc3NhZ2UuanMiXSwibmFtZXMiOlsiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJleHBvcnRzIiwidmFsdWUiLCJfTWVzc2FnZSIsInJlcXVpcmUiLCJfTWVzc2FnZTIiLCJfaW50ZXJvcFJlcXVpcmVEZWZhdWx0Iiwib2JqIiwiX19lc01vZHVsZSIsImRlZmF1bHQiLCJNZXNzYWdlIiwiY3JlYXRlIiwicmVxIiwicmVzIiwiYm9keSIsInN1YmplY3QiLCJtZXNzYWdlIiwicGFyZW50TWVzc2FnZUlkIiwic3RhdHVzIiwic2VuZCIsImdldEFsbCIsIm1lc3NhZ2VzIiwiZmluZEFsbCIsImdldE9uZSIsImZpbmRPbmUiLCJwYXJhbXMiLCJpZCIsImdldFVucmVhZCIsImZpbmRNZXNzYWdlcyIsImdldFNlbnQiLCJkZWxldGUiLCJfZGVsZXRlIiwibWVzIl0sIm1hcHBpbmdzIjoiQUFBQTs7QUFFQUEsT0FBT0MsY0FBUCxDQUFzQkMsT0FBdEIsRUFBK0IsWUFBL0IsRUFBNkM7QUFDM0NDLFNBQU87QUFEb0MsQ0FBN0M7O0FBSUEsSUFBSUMsV0FBV0MsUUFBUSxtQkFBUixDQUFmOztBQUVBLElBQUlDLFlBQVlDLHVCQUF1QkgsUUFBdkIsQ0FBaEI7O0FBRUEsU0FBU0csc0JBQVQsQ0FBZ0NDLEdBQWhDLEVBQXFDO0FBQUUsU0FBT0EsT0FBT0EsSUFBSUMsVUFBWCxHQUF3QkQsR0FBeEIsR0FBOEIsRUFBRUUsU0FBU0YsR0FBWCxFQUFyQztBQUF3RDs7QUFFL0YsSUFBSUcsVUFBVTtBQUNaOzs7Ozs7QUFNQUMsVUFBUSxTQUFTQSxNQUFULENBQWdCQyxHQUFoQixFQUFxQkMsR0FBckIsRUFBMEI7QUFDaEMsUUFBSSxDQUFDRCxJQUFJRSxJQUFKLENBQVNDLE9BQVYsSUFBcUIsQ0FBQ0gsSUFBSUUsSUFBSixDQUFTRSxPQUEvQixJQUEwQyxDQUFDSixJQUFJRSxJQUFKLENBQVNHLGVBQXBELElBQXVFLENBQUNMLElBQUlFLElBQUosQ0FBU0ksTUFBckYsRUFB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bEIiLCJmaWxlIjoiTWVzc2FnZS5qcyIsInNvdXJjZVJvb3QiOiIvaG9tZS9naXJhaWN0L1Byb2plY3QvYW5kZWxhL0VQSUNtYWlsL2J1aWxkL2NvbnRyb2xsZXJzIiwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuXG52YXIgX01lc3NhZ2UgPSByZXF1aXJlKCcuLi9tb2RlbHMvTWVzc2FnZScpO1xuXG52YXIgX01lc3NhZ2UyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfTWVzc2FnZSk7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cbnZhciBNZXNzYWdlID0ge1xuICAvKipcbiAgICogXG4gICAqIEBwYXJhbSB7b2JqZWN0fSByZXEgXG4gICAqIEBwYXJhbSB7b2JqZWN0fSByZXNcbiAgICogQHJldHVybnMge29iamVjdH0gbWVzc2FnZSBvYmplY3QgXG4gICAqL1xuICBjcmVhdGU6IGZ1bmN0aW9uIGNyZWF0ZShyZXEsIHJlcykge1xuICAgIGlmICghcmVxLmJvZHkuc3ViamVjdCAmJiAhcmVxLmJvZHkubWVzc2FnZSAmJiAhcmVxLmJvZHkucGFyZW50TWVzc2FnZUlkICYmICFyZXEuYm9keS5zdGF0dXMpIHtcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuc2VuZCh7ICdtZXNzYWdlJzogJ0FsbCBmaWVsZHMgYXJlIHJlcXVpcmVkJyB9KTtcbiAgICB9XG4gICAgdmFyIG1lc3NhZ2UgPSBfTWVzc2FnZTIuZGVmYXVsdC5jcmVhdGUocmVxLmJvZHkpO1xuICAgIHJldHVybiByZXMuc3RhdHVzKDIwMCkuc2VuZChtZXNzYWdlKTtcbiAgfSxcblxuICAvKipcbiAgICogXG4gICAqIEBwYXJhbSB7b2JqZWN0fSByZXEgXG4gICAqIEBwYXJhbSB7b2JqZWN0fSByZXMgXG4gICAqIEByZXR1cm5zIHtvYmplY3R9IG1lc3NhZ2VzIGFycmF5XG4gICAqL1xuICBnZXRBbGw6IGZ1bmN0aW9uIGdldEFsbChyZXEsIHJlcykge1xuICAgIHZhciBtZXNzYWdlcyA9IF9NZXNzYWdlMi5kZWZhdWx0LmZpbmRBbGwoKTtcbiAgICByZXR1cm4gcmVzLnN0YXR1cygyMDApLnNlbmQobWVzc2FnZXMpO1xuICB9LFxuXG4gIC8qKlxuICAgKiBcbiAgICogQHBhcmFtIHtvYmplY3R9IHJlcSBcbiAgICogQHBhcmFtIHtvYmplY3R9IHJlc1xuICAgKiBAcmV0dXJucyB7b2JqZWN0fSBtZXNzYWdlIG9iamVjdFxuICAgKi9cbiAgZ2V0T25lOiBmdW5jdGlvbiBnZXRPbmUocmVxLCByZXMpIHtcbiAgICB2YXIgbWVzc2FnZSA9IF9NZXNzYWdlMi5kZWZhdWx0LmZpbmRPbmUocmVxLnBhcmFtcy5pZCk7XG4gICAgaWYgKCFtZXNzYWdlKSB7XG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLnNlbmQoeyAnbWVzc2FnZSc6ICdtZXNzYWdlIG5vdCBmb3VuZCcgfSk7XG4gICAgfVxuICAgIHJldHVybiByZXMuc3RhdHVzKDIwMCkuc2VuZChtZXNzYWdlKTtcbiAgfSxcblxuICAvKipcbiAgICogXG4gICAqIEBwYXJhbSB7b2JqZWN0fSByZXEgXG4gICAqIEBwYXJhbSB7b2JqZWN0fSByZXNcbiAgICogQHJldHVybnMge29iamVjdH0gbWVzc2FnZSBvYmplY3RcbiAgICovXG4gIGdldFVucmVhZDogZnVuY3Rpb24gZ2V0VW5yZWFkKHJlcSwgcmVzKSB7XG4gICAgdmFyIG1lc3NhZ2VzID0gX01lc3NhZ2UyLmRlZmF1bHQuZmluZE1lc3NhZ2VzKCdVbnJlYWQnKTtcbiAgICBpZiAoIW1lc3NhZ2VzKSB7XG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLnNlbmQoeyAnbWVzc2FnZSc6ICdtZXNzYWdlIG5vdCBmb3VuZCcgfSk7XG4gICAgfVxuICAgIHJldHVybiByZXMuc3RhdHVzKDIwMCkuc2VuZChtZXNzYWdlcyk7XG4gIH0sXG5cbiAgLyoqXG4gICAqIFxuICAgKiBAcGFyYW0ge29iamVjdH0gcmVxIFxuICAgKiBAcGFyYW0ge29iamVjdH0gcmVzXG4gICAqIEByZXR1cm5zIHtvYmplY3R9IG1lc3NhZ2Ugb2JqZWN0XG4gICAqL1xuICBnZXRTZW50OiBmdW5jdGlvbiBnZXRTZW50KHJlcSwgcmVzKSB7XG4gICAgdmFyIG1lc3NhZ2VzID0gX01lc3NhZ2UyLmRlZmF1bHQuZmluZE1lc3NhZ2VzKCdTZW50Jyk7XG4gICAgaWYgKCFtZXNzYWdlcykge1xuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5zZW5kKHsgJ21lc3NhZ2UnOiAnbWVzc2FnZSBub3QgZm91bmQnIH0pO1xuICAgIH1cbiAgICByZXR1cm4gcmVzLnN0YXR1cygyMDApLnNlbmQobWVzc2FnZXMpO1xuICB9LFxuXG4gIC8qKlxuICAgKiBcbiAgICogQHBhcmFtIHtvYmplY3R9IHJlcSBcbiAgICogQHBhcmFtIHtvYmplY3R9IHJlcyBcbiAgICogQHJldHVybnMge3ZvaWR9IHJldHVybiBzdGF0dWMgY29kZSAyMDQgXG4gICAqL1xuICBkZWxldGU6IGZ1bmN0aW9uIF9kZWxldGUocmVxLCByZXMpIHtcbiAgICB2YXIgbWVzc2FnZSA9IF9NZXNzYWdlMi5kZWZhdWx0LmZpbmRPbmUocmVxLnBhcmFtcy5pZCk7XG4gICAgaWYgKCFtZXNzYWdlKSB7XG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLnNlbmQoeyAnbWVzc2FnZSc6ICdtZXNzYWdlIG5vdCBmb3VuZCcgfSk7XG4gICAgfVxuICAgIHZhciBtZXMgPSBfTWVzc2FnZTIuZGVmYXVsdC5kZWxldGUocmVxLnBhcmFtcy5pZCk7XG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoMjAwKS5zZW5kKG1lcyk7XG4gIH1cbn07XG5cbmV4cG9ydHMuZGVmYXVsdCA9IE1lc3NhZ2U7Il19